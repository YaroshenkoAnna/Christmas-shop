import{B as l}from"./index-Dn_xiXvr.js";import{O as _,S as m,I as w,a as u,t as y,M as h}from"./storage-DDqejXTW.js";import{B as c}from"./button-C866y7lg.js";const f="_container_1oyw5_7",E="_back_1oyw5_24",D="_sound_1oyw5_28",T="_start_1oyw5_32",N="_disabled_1oyw5_36",a={"wheel-page":"_wheel-page_1oyw5_1",container:f,back:E,sound:D,start:T,disabled:N};function k(i,t){let e;return(...s)=>{e!==void 0&&clearTimeout(e),e=setTimeout(()=>{i(...s)},t)}}const p="soundDisabled";class x{soundDisabled=new _(m.load(p)??!0);sounds=[];constructor(){this.soundDisabled.subscribe(t=>{m.save(p,t),this.handleSoundState(t)}),this.handleSoundState(this.soundDisabled.value)}toggleSound(){this.soundDisabled.set(!this.soundDisabled.value)}registerSound(t){this.sounds.push(t),t.muted=this.soundDisabled.value}handleSoundState(t){this.sounds.forEach(e=>{e.muted=t,e.volume=t?0:1})}}const o=new x;class C extends l{victorySound=new Audio("src/assets/audio/victory.mp3");interactiveElements=[];constructor(){super({tag:"main",classNames:[a["wheel-page"]]}),o.registerSound(this.victorySound);const t=new c({text:"Back to Options",callback:()=>{globalThis.location.hash="/"},classNames:[a.back]}),e=new c({text:o.soundDisabled.value?"Sound: Off":"Sound: On",callback:()=>{o.toggleSound()},classNames:[a.sound]});o.soundDisabled.subscribe(n=>{e.setText(n?"Sound: Off":"Sound: On")});const s=new w({type:"number",name:"time",attributes:{min:"0",max:"30"},id:"Time",classNames:[a.time]});s.setValue(u.toString()),s.addListener("input",k(n=>{const g=n.target,b=Number(g.value);b<u?s.setValue(u.toString()):b>h&&s.setValue(h.toString())},1e3));const S=Number(s.getValue()),r=new c({text:"Start",callback:()=>{this.disable(),setTimeout(()=>{this.enable(),this.victorySound.play().catch(n=>{console.error("Failed to play victory sound:",n)})},S*1e3)},classNames:[a.start]}),v=new l({tag:"span",text:"Time",classNames:[a.span]}),d=new l({tag:"div",classNames:[a.container]});d.appendChildren(v,s),this.appendChildren(y,t,e,d,r),this.interactiveElements=[s,r,t,e,d]}disable(){this.interactiveElements.forEach(t=>{t.setAttributes({disabled:"true"}),t.addClasses([a.disabled])})}enable(){this.interactiveElements.forEach(t=>{t.removeAttribute("disabled"),t.removeClasses([a.disabled])})}}export{C as WheelPage};
